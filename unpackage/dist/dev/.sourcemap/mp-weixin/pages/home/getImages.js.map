{"version":3,"sources":["uni-app:///main.js",null,"webpack:////Users/wenjieliu/hbuilderSpaces/newSjty/pages/home/getImages.vue?2a4a","webpack:////Users/wenjieliu/hbuilderSpaces/newSjty/pages/home/getImages.vue?73f3","webpack:////Users/wenjieliu/hbuilderSpaces/newSjty/pages/home/getImages.vue?853e","uni-app:///pages/home/getImages.vue"],"names":["createPage","Page"],"mappings":"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","file":"pages/home/getImages.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/home/getImages.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./getImages.vue?vue&type=template&id=d7f27412&\"\nvar renderjs\nimport script from \"./getImages.vue?vue&type=script&lang=js&\"\nexport * from \"./getImages.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/home/getImages.vue\"\nexport default component.exports","export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./getImages.vue?vue&type=template&id=d7f27412&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./getImages.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./getImages.vue?vue&type=script&lang=js&\"","<template>\n\t<view>\n\t\t<cu-custom bgColor=\"bg-gradual-blue\" :isBack=\"true\">\n\t\t\t<block slot=\"backText\">返回</block>\n\t\t\t<block slot=\"content\">图片模块</block>\n\t\t</cu-custom>\n\t\t<view class=\"cu-bar bg-white margin-top\">\n\t\t\t<view class=\"action\">\n\t\t\t\t图片上传\n\t\t\t</view>\n\t\t\t<view class=\"action\">\n\t\t\t\t{{imgList.length}}/30\n\t\t\t</view>\n\t\t</view>\n\t\t<view class=\"cu-form-group\">\n\t\t\t<view class=\"grid col-4 grid-square flex-sub\">\n\t\t\t\t<view class=\"bg-img\" v-for=\"(item,index) in imgList\" :key=\"index\" @tap=\"ViewImage\" :data-url=\"imgList[index]\">\n\t\t\t\t <image :src=\"imgList[index]\" mode=\"aspectFill\"></image>\n\t\t\t\t\t<view class=\"cu-tag bg-red\" @tap.stop=\"DelImg\" :data-index=\"index\" v-if=\"type == 1\">\n\t\t\t\t\t\t<text class='cuIcon-close'></text>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"solids\" @tap=\"ChooseImage\" v-if=\"imgList.length<30 && type==1\">\n\t\t\t\t\t<text class='cuIcon-cameraadd'></text>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\t\t<view style='width:0px;height:0px;overflow:hidden;'>\n\t\t\t<canvas canvas-id=\"myCanvas\" class=\"\">\n\t\t\t</canvas>\n\t\t</view>\n\t</view>\n</template>\n\n<script>\n\timport utils from \"../../utils.js\";\n\texport default {\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tindex: -1,\n\t\t\t\tfileNo:'',\n\t\t\t\ttype:0,\n\t\t\t\timgIndex:0,\n\t\t\t\timgServerList:[],//存放已经上传的图片\n\t\t\t\timgList: [],\n\t\t\t\tcanvasW:0, // 画布宽\n\t\t\t\tcanvasH:0, // 画布高\n\t\t\t\tSystemInfo:{}, // 设备信息\n\t\t\t\tgoodsImg: {}, // 商品主图\n\t\t\t\tewmImg:{}, // 二维码图片\n\t\t\t\tewmW:120, // 二维码大小\n\t\t\t\ttitle:'COCOSILIYA抖音爆款男女士鎏金沙香水持久自然淡香流沙金香水', // 商品标题\n\t\t\t\tprice:'158.00', // 价格\n\t\t\t\tOldprice:'350.00', // 原价\n\t\t\t\tname:'天涯过客', // 推荐人\n\t\t\t}\n\t\t},\n\t\tmethods: {\n\t\t\tChooseImage() {\n\t\t\t\tvar _this = this;\n\t\t\t\n\t\t\t\tuni.chooseImage({\n\t\t\t\t\tcount: 9, //默认9\n\t\t\t\t\tsizeType: ['original', 'compressed'], //可以指定是原图还是压缩图，默认二者都有\n\t\t\t\t\t//sourceType: ['album'], //从相册选择\n\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\n\t\t\t\t\t\tconsole.log(\"\\n===================\\nchooseImage:\"+JSON.stringify(res));\n\t\t\t\t\t\tconst tempFilePaths = res.tempFilePaths;\n\t\t\t\t\t\t\n\t\t\t\t\t\tfor(let image of tempFilePaths){\n\t\t\t\t\t\t\tconst uri = encodeURI(\"http://www.sjyjr.net/sjyjf/app/6023?fileNo=\"+_this.fileNo+\"&accessToken=\"+uni.getStorageSync(\"accessToken\"));\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tuni.uploadFile({\n\t\t\t\t\t\t\t\turl: uri, //仅为示例，非真实的接口地址\n\t\t\t\t\t\t\t\tfilePath: image,\n\t\t\t\t\t\t\t\tname: 'file',\n\t\t\t\t\t\t\t\t//files:tempFilePaths,\n\t\t\t\t\t\t\t\tformData: {\n\t\t\t\t\t\t\t\t\t'user': 'test'\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tsuccess: (uploadFileRes) => {\n\t\t\t\t\t\t\t\t\tconsole.log(\"update success:\"+uploadFileRes.data);\n\t\t\t\t\t\t\t\t\tvar tempData = JSON.parse(uploadFileRes.data);\n\t\t\t\t\t\t\t\t\tvar serurl = \"http://www.sjyjr.net/static/\" + _this.fileNo +\"/\"+tempData.responseData;\n\t\t\t\t\t\t\t\t\tconsole.log(\"serurl:\"+serurl);\n\t\t\t\t\t\t\t\t\t_this.imgServerList.push(tempData.responseData);\n\t\t\t\t\t\t\t\t\t_this.imgList.push(serurl)\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tuni.setStorageSync(_this.fileNo+\"_\"+_this.index+\"_img\", _this.imgServerList.join(\"|\"));\n\t\t\t\t\t\t\t\t\tuni.setStorage({\n\t\t\t\t\t\t\t\t\t\tkey: _this.fileNo + '_'+_this.index+'_img',\n\t\t\t\t\t\t\t\t\t\tdata: _this.imgServerList.join(\"|\"),\n\t\t\t\t\t\t\t\t\t\tsuccess: function () {\n\t\t\t\t\t\t\t\t\t\t\tconsole.log('success');\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tcomplete:(res)=>{\n\t\t\t\t\t\t\t\t\tconsole.log(\"complete:\"+JSON.stringify(res));\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\tViewImage(e) {\n\t\t\t\tuni.previewImage({\n\t\t\t\t\turls: this.imgList,\n\t\t\t\t\tcurrent: e.currentTarget.dataset.url\n\t\t\t\t});\n\t\t\t},\n\t\t\tDelImg(e) {\n\t\t\t\tvar _this = this;\n\t\t\t\tuni.showModal({\n\t\t\t\t\ttitle: '召唤师',\n\t\t\t\t\tcontent: '确定要删除这段回忆吗？',\n\t\t\t\t\tcancelText: '再看看',\n\t\t\t\t\tconfirmText: '再见',\n\t\t\t\t\tsuccess: res => {\n\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\t_this.imgList.splice(e.currentTarget.dataset.index, 1);\n\t\t\t\t\t\t\t_this.imgServerList.splice(e.currentTarget.dataset.index, 1);\n\t\t\t\t\t\t//\tuni.setStorageSync(_this.fileNo+\"_\"+_this.index+\"_img\", _this.imgServerList.join(\"|\"));\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tuni.setStorage({\n\t\t\t\t\t\t\t\tkey: _this.fileNo + '_'+_this.index+'_img',\n\t\t\t\t\t\t\t\tdata: _this.imgServerList.join(\"|\"),\n\t\t\t\t\t\t\t\tsuccess: function () {\n\t\t\t\t\t\t\t\t\tconsole.log('success');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\t/**\n\t\t\t * @param {Object} goodsImgUrl\n\t\t\t * 图片加水印：目前还有问题\n\t\t\t * 1、图片只截取了部分\n\t\t\t * 2、水印没加上去\n\t\t\t */\n\t\t\tasync addWaterImg(goodsImgUrl){\n\t\t\t\tvar _this = this;\n\t\t\t\tconsole.log(\"==========addWaterImg:\"+goodsImgUrl);\n\t\t\t\t// 获取设备信息，主要获取宽度，赋值给canvasW 也就是宽度：100%\n\t\t\t\tthis.SystemInfo = await this.getSystemInfo();\n\t\t\t\t// 获取商品主图，二维码信息，APP端会返回图片的本地路径（H5端只能返回原路径）\n\t\t\t\tthis.goodsImg = await this.getImageInfo('http://api.yoronglife.com//uploads/attach/2020/10/20201020/7f0ecf34d9408f7fc3b789894483ab75.jpg');\n\t\t\t\tthis.ewmImg = await this.getImageInfo('https://img.cdn.aliyun.dcloud.net.cn/guide/uniapp/gh_33446d7f7a26_430.jpg');\n\t\t\t\tthis.canvasW = this.SystemInfo.windowWidth; // 画布宽度\n\t\t\t\t\t\t\tthis.canvasH = this.goodsImg.height + this.ewmW + 50;  // 画布高度 = 主图高度+二维码高度 + 文字图片的间距（大概50）\n\t\t\t\n\t\t\t\t// 如果主图，二维码图片，设备信息都获取成功，开始绘制海报，这里需要用setTimeout延时绘制，否则可能会出现图片不显示。\n\t\t\t\tif(this.goodsImg.errMsg == 'getImageInfo:ok' && this.ewmImg.errMsg == 'getImageInfo:ok' && this.SystemInfo.errMsg == 'getSystemInfo:ok'){\n\t\t\t\t//if(this.goodsImg.errMsg == 'getImageInfo:ok' && this.SystemInfo.errMsg == 'getSystemInfo:ok'){\n\t\t\t\t\n\t\t\t\t\tconsole.log('==============ok')\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ticon:'loading',\n\t\t\t\t\t\tmask:true,\n\t\t\t\t\t\tduration:10000,\n\t\t\t\t\t\ttitle: '海报绘制中',\n\t\t\t\t\t});\n\t\t\t\t\tsetTimeout(()=>{\n\t\t\t\t\t\tconsole.log(\"=================setTimeout==============\");\n\t\t\t\t\t\tconsole.log(\"=================canvasW:\"+_this.canvasW);\n\t\t\t\t\t\tconsole.log(\"=================canvasH:\"+_this.canvasH);\n\t\t\t\t\t\tvar ctx = uni.createCanvasContext('myCanvas', _this);\n\t\t\t\t\t\t// 填充背景色，白色\n\t\t\t\t\t\t\n\t\t\t\t\t\tctx.fillRect(0, 0, _this.canvasW, _this.canvasH) // fillRect(x,y,宽度，高度)\n\t\t\t\t\t\t\n\t\t\t\t\t\t// 绘制商品主图，二维码\n\t\t\t\t\t\t// 绘制商品主图，二维码\n\t\t\t\t\t\t\t\t\t\t\tctx.drawImage(this.goodsImg.path, 0, 0, this.canvasW, this.canvasW) // drawImage(图片路径,x,y,绘制图像的宽度，绘制图像的高度)\n\t\t\t\t\t\t\t\t\t\t\tctx.drawImage(this.ewmImg.path, this.canvasW-130, this.canvasW+10, this.ewmW, this.ewmW) // drawImage(图片路径,x,y,绘制图像的宽度，绘制图像的高度,二维码的宽,高)\n\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t// 3、绘制商品标题，多余文字自动换行\n\t\t\t\t\t\tctx.setFontSize(16); // setFontSize() 设置字体字号\n\t\t\t\t\t\tctx.setFillStyle('#ffffff'); // setFillStyle() 设置字体颜色\n\t\t\t\t\t\tctx.font='10px sans-serif'  \n\t\t\t\t\t \n\t\t\t\t\t\tctx.setTextAlign(\"center\")  \n\t\t\t\t\t\n\t\t\t\t\t\tctx.fillText('联系我们：0731-89572689', _this.canvasW/2, 50)    \n\t\t\t\t\t\tctx.save()\n\t\t\t\t\t\t/* end */\n\t\t\t\t\t\tconsole.log(\"222222=================setTimeout==============\")\n\t\t\t\t\t\t\n\t\t\t\t\t\t\n\t\n\t\t\t\t\t\tconsole.log(\"33333333=================setTimeout==============\")\n\t\t\t\t\t\tctx.draw(true,(ret)=>{ // draw方法 把以上内容画到 canvas 中。\n\t\t\t\t\t\t\tconsole.log(\"=============draw finish==========\"+ret); \n\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\ticon:'success',\n\t\t\t\t\t\t\t\tmask:true,\n\t\t\t\t\t\t\t\ttitle: '绘制完成',\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tuni.canvasToTempFilePath({ // 保存canvas为图片\n\t\t\t\t\t\t\t\tcanvasId: 'myCanvas',\n\t\t\t\t\t\t\t\tcomplete: function(res) {\n\t\t\t\t\t\t\t\t\t// 在H5平台下，tempFilePath 为 base64, // 图片提示跨域 H5保存base64失败，APP端正常输出临时路径\n\t\t\t\t\t\t\t\t\tconsole.log(\"=========canvasToTempFilePath:\"+JSON.stringify(res));\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t} ,\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t});\n\t\t\t\t\t},10000)\n\t\t\t\t}else{\n\t\t\t\t\t\n\t\t\t\t\tconsole.log('==================err')\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t},\n\t\t\t// 获取图片信息\n\t\t\tgetImageInfo(image) {\n\t\t\t\treturn new Promise((req, rej) => {\n\t\t\t\t\tuni.getImageInfo({\n\t\t\t\t\t\tsrc: image,\n\t\t\t\t\t\tsuccess: function(res) {\n\t\t\t\t\t\t\tconsole.log(\"========getImageInfo:\"+JSON.stringify(res));\n\t\t\t\t\t\t\treq(res)\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t})\n\t\t\t},\n\t\t\t\n\t\t\t// 获取设备信息\n\t\t\tgetSystemInfo(){\n\t\t\t\treturn new Promise((req, rej) => {\n\t\t\t\t\tuni.getSystemInfo({\n\t\t\t\t\t\tsuccess: function (res) {\n\t\t\t\t\t\t\tconsole.log(\"========getSystemInfo:\"+JSON.stringify(res));\n\t\t\t\t\t\t\treq(res)\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t})\n\t\t\t},\n\t\t\t\n\t\t},\n\t\tonLoad(options){\n\t\t\tvar _this = this;\n\t\t\t_this.fileNo = options.fileNo;\n\t\t\t_this.imgIndex = options.index;\n\t\t\t_this.type = options.type;//0-只读 1-可编辑\n\t\t\tconsole.log(\"getImages onLoad:\"+JSON.stringify(options));\n\t\t\tvar imgType = utils.getImgType(options.index);\n\t\t\tvar tmpData = uni.getStorageSync(options.fileNo+\"_\"+options.index+\"_img\");\n\t\t\t_this.imgServerList = tmpData.split(\"|\");\n\t\t\tconsole.log(\"tmpData:\"+JSON.stringify(tmpData));\n\t\t\t\n\t\t\tconsole.log(\"imgServerList:\"+JSON.stringify(_this.imgServerList));\n\t\t\tif(!utils.isEmpty(tmpData)){\n\t\t\t\t_this.imgList = utils.getImgUrlList(tmpData,options.fileNo);\n\t\t\t}\n\t\t\t\n\t\t\tconsole.log(\"imgList:\"+JSON.stringify(_this.imgList));\n\t\t}\n\t}\n</script>\n\n<style>\n</style>\n"],"sourceRoot":""}